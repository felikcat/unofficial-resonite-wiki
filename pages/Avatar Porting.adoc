:experimental:
:imagesdir: ../images/

== Before proceeding
- Get familiar with xref:pages/Desktop usage.adoc[Desktop usage] if you haven't thoroughly already.


== If you want someone to help you, do the following:
. Import your .fbx (Model) as a file instead of a 3D model.
. Save that file to your Inventory.
. In the top-right of the Main Menu, once "Synced" is displayed, then you can spawn that new model.

NOTE: Why: syncing to the Cloud is much faster than uploading to a Headless server, or a server hosted by a player.

== How to pin-point floating objects in your Avatar
. You can prod at bones to see what your floating objects are assigned to via BlendShapeWeights.
- Be sure to move around your limbs if in VR, as to pinpoint quicker what those floating objects are.

== PBS Metallic differences compared to ToonShader
. AlbedoTexture = MainTexture

== 1. Setting up the model
. To start with, you want to drag the .fbx of your model into Resonite. If this doesn't work, you have to go to Resonite's Main Menu -> Files, then find and double-click that model.
- You are importing a 3D Model -> Regular / Avatar -> Meters (m) if the model is measured like this -- if you do not know, use Auto Humanoid Height. Now, run the Import!

. Go to the Main Menu -> Home -> Avatar Creator. You will then select the Headset with the Dev Tool, and open an Inspector. Go up the Root until you see "Root: Avatar Creator". It should look like the following screenshot: +
image:Avatar Porting/Resonite_rtFcjhfIeD.jpg[]
- Keep the Headset's Rotation at: x -> 0, y -> 90, z -> 0

. Avatar Creator -> Turn off "Use Symmetry", we're going to manually setup the hands.
- You want your hands to relatively look like this. Be sure to use the Gizmos (those red, green, and blue arrows) to line it up precisely:
image:Avatar Porting/Resonite_vgfOSb0As2.jpg[] +
image:Avatar Porting/Resonite_WrnmRviGkC.jpg[]

- If your hand grabber got screwed up, fix the Grabber and Shelf manually, such as this: +
image:Avatar Porting/Resonite_GaSfve9kar.jpg[] +
image:Avatar Porting/Resonite_Wp7IbnJAQW.jpg[]

. Now that your hands are finished, tap on Avatar Creator -> "Create" and now your model is setup!

WARNING: Do not equip the avatar, you will start running into serious problems when we get to Head Proxies.

== 2. Setting up the model's textures
. To start, you need to get out of the Avatar.

. Let's setup our mouths and mouth movement.
- First, we're going to set the main texture to the neutral/base state image you've got. First, click the up arrow on the left of the Mouth material: +
image:Avatar Porting/Resonite_afJZVDTUrz.png[]

- Drag the image to the AlbedoTexture slot (this is the main texture for PBS_Metallic):
image:Avatar Porting/Resonite_WafBDrXRHP.png[]

- In the Inspector: CenteredRoot -> RootNode -> Face (double-click it). Now scroll all the way down, then tap "Attach Component". The component we want is: `Assets -> Utility -> AssetMultiplexer<A> -> AssetMultiplexer<ITexture2D>`. Now, below "Assets (list):" you will see an Add button, tap it, then drag a picture of your mouth in its neutral/base state to slot 0: +
image:Avatar Porting/Resonite_RfpYSzxQnH.png[]

- Attach another Component, `Rendering -> DirectVisemeDriver`. 

- Now in the Inspector double-click to select the Head Proxy, scroll all the way down and attach the following components: `Media -> Utility -> VisemeAnalyzer`, `Users -> Common Avatar System -> Audio -> AvatarVoiceSourceAssigner`

- Drag the text "Source" under VisemeAnalyzer to "TargetReference" under AvatarVoiceSourceAssigner. It should look like this: +
image:Avatar Porting/Resonite_QzwpNNoP3r.png[]

- Now is a good time to deselect all your tools, then click on the avatar to Equip it, then to save it into the Main Menu's Inventory: +
image:Avatar Porting/Resonite_9kD0jbaVUW.png[] +
Afterwards, equip a different avatar, then spawn in the avatar you just saved by double-clicking it.

- In the Inspector we are going back to CenteredRoot -> RootNode -> Face, scroll all the way down, and now you're going to line up every mouth texture with each slot of the DirectVisemeDriver. If done correctly, it'll look as follows (I excluded Laugh here; it technically goes up to 15): +
image:Avatar Porting/explorer_jOlUvDRSM9.png[] +
image:Avatar Porting/Resonite_eAguhtFZSU.jpg[]

. Add a slot underneath Face with the following button: 
image:Avatar Porting/Resonite_fmgMfqer1C.png[] +
Then name it Flux: +
image:Avatar Porting/Resonite_BN5pHbyxwT.png[] +

- Now equip the Proto Flux tool, open the Context wheel then double-click `Core -> ValueFieldDrive<T> -> ValueFieldDrive<float>`

